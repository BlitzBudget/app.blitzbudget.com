(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{643:function(e,r,t){"use strict";t.r(r);var o=t(4),n=(t(18),{data:function(){return{model:{password:"",reenterPassword:""},modelValidations:{oldPassword:{required:!0,min:8},password:{required:!0,min:8},reenterPassword:{required:!0,min:8}}}},methods:{getError:function(e){return this.errors.first(e)},validate:function(){var e=this,r=this.$authentication.fetchAccessToken();return this.$validator.validateAll().then((function(t){return e.$emit("on-submit",t,e.model,r),t}))}}}),d=t(2),component=Object(d.a)(n,(function(){var e=this,r=e._self._c;return r("form",[r("card",{attrs:{"footer-classes":"text-left"}},[r("div",{attrs:{slot:"header"},slot:"header"},[r("h4",{staticClass:"card-title"},[e._v(e._s(e.$t("user.change-password.title")))])]),e._v(" "),r("div",[r("base-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8",expression:"'required|min:8'"}],attrs:{name:"oldPassword",error:e.getError("oldPassword"),type:"password",autocomplete:"old-password","addon-left-icon":"tim-icons icon-lock-circle",label:e.$t("user.change-password.old-password")},model:{value:e.model.oldPassword,callback:function(r){e.$set(e.model,"oldPassword",r)},expression:"model.oldPassword"}}),e._v(" "),r("base-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8",expression:"'required|min:8'"}],ref:"password",attrs:{name:"password",error:e.getError("password"),type:"password",autocomplete:"current-password","addon-left-icon":"tim-icons icon-lock-circle",label:e.$t("user.change-password.new-password")},model:{value:e.model.password,callback:function(r){e.$set(e.model,"password",r)},expression:"model.password"}}),e._v(" "),r("base-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|confirmed:password",expression:"'required|confirmed:password'"}],attrs:{name:"reenterPassword",error:e.getError("reenterPassword"),type:"password",autocomplete:"reenter-password","addon-left-icon":"tim-icons icon-lock-circle","data-vv-as":"password",label:e.$t("user.change-password.reenter-password")},model:{value:e.model.reenterPassword,callback:function(r){e.$set(e.model,"reenterPassword",r)},expression:"model.reenterPassword"}}),e._v(" "),r("div",{staticClass:"small form-category"},[e._v(e._s(e.$t("user.change-password.required-fields")))])],1),e._v(" "),r("template",{slot:"footer"},[r("base-button",{attrs:{"native-type":"submit",type:"primary"},nativeOn:{click:function(r){return r.preventDefault(),e.validate.apply(null,arguments)}}},[e._v(e._s(e.$t("user.change-password.button")))]),e._v(" "),r("nuxt-link",{staticClass:"pull-right",attrs:{to:"/support"}},[e._v(e._s(e.$t("user.change-password.forgot-password")))])],1)],2)],1)}),[],!1,null,null,null),l={name:"change-password-page",layout:"plain",components:{ChangePasswordForm:component.exports},data:function(){return{emailModel:{},hasSucceeded:!1}},methods:{changePassword:function(e,r,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e){o.next=2;break}return o.abrupt("return");case 2:return n.emailModel=r,o.next=5,n.$axios.$post("/profile/change-password",{previous_password:r.oldPassword,proposed_password:r.password,access_token:t}).then((function(){n.hasSucceeded=!0})).catch((function(e){var r=e.response,t=n.$lastElement(n.$splitElement(r.data.message,":"));n.$notify({type:"danger",icon:"tim-icons icon-simple-remove",verticalAlign:"bottom",horizontalAlign:"center",message:t})}));case 5:case"end":return o.stop()}}),o)})))()}}},c=Object(d.a)(l,(function(){var e=this,r=e._self._c;return r("div",{staticClass:"container"},[r("notifications"),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8 ml-auto mr-auto"},[r("change-password-form",{class:[{"show d-block":!e.hasSucceeded},{"d-none":e.hasSucceeded}],on:{"on-submit":e.changePassword}})],1)]),e._v(" "),r("div",{staticClass:"col-md-12 ml-auto-mr-auto"},[r("card",{class:[{"show d-block":e.hasSucceeded},{"d-none":!e.hasSucceeded}],attrs:{type:"testimonial","header-classes":"card-header-avatar"}},[r("p",{staticClass:"card-description"},[e._v("\n                "+e._s(e.$t("user.change-password.success.description"))+"\n            ")]),e._v(" "),r("template",{slot:"footer"},[r("nuxt-link",{staticClass:"btn btn-primary",attrs:{to:"/user/profile"}},[e._v("\n                    "+e._s(e.$t("user.change-password.success.button"))+"\n                ")])],1)],2)],1)],1)}),[],!1,null,null,null);r.default=c.exports}}]);