(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{645:function(e,t,r){"use strict";r.r(t);var n=r(4),o=(r(18),{name:"reset-account-form",data:function(){return{model:{password:""},modelValidations:{password:{required:!0,min:8}}}},methods:{getError:function(e){return this.errors.first(e)},validate:function(){var e=this;return this.$validator.validateAll().then((function(t){return e.$emit("on-submit",t,e.model),t}))}}}),c=r(2),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;return t("form",[t("card",{attrs:{"footer-classes":"text-left"}},[t("div",{attrs:{slot:"header"},slot:"header"},[t("h4",{staticClass:"card-title mb-0"},[e._v(e._s(e.$t("user.reset-account.title")))]),e._v(" "),t("small",{staticClass:"description"},[e._v(e._s(e.$t("user.reset-account.description")))])]),e._v(" "),t("div",[t("base-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8",expression:"'required|min:8'"}],ref:"password",attrs:{name:"password",error:e.getError("password"),type:"password",autocomplete:"current-password","addon-left-icon":"tim-icons icon-lock-circle",label:e.$t("user.reset-account.password")},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}}),e._v(" "),t("div",{staticClass:"small form-category"},[e._v(e._s(e.$t("user.reset-account.required-fields")))])],1),e._v(" "),t("template",{slot:"footer"},[t("base-button",{attrs:{"native-type":"submit",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.validate.apply(null,arguments)}}},[e._v(e._s(e.$t("user.reset-account.button")))])],1)],2)],1)}),[],!1,null,null,null),l={name:"reset-account-page",layout:"plain",components:{ResetAccountForm:component.exports},data:function(){return{resetModel:{},hasSucceeded:!1,model:{password:null}}},methods:{resetAccount:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,n=e.$authentication.fetchCurrentUser(e).financialPortfolioId,t.next=4,e.$axios.$post("/profile/reset-account",{walletId:n,deleteAccount:!1}).then((function(){r.$wallet.resetWallet(r),e.hasSucceeded=!0})).catch((function(t){var r=t.response,n=e.$lastElement(e.$splitElement(r.data.message,":"));e.$notify({type:"danger",icon:"tim-icons icon-simple-remove",verticalAlign:"bottom",horizontalAlign:"center",message:n})}));case 4:case"end":return t.stop()}}),t)})))()},verifyPassword:function(e,t){var r=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e){o.next=2;break}return o.abrupt("return");case 2:return c=r.$authentication.fetchCurrentUser(r).email,o.next=5,r.$axios.$post("/profile/sign-in",{email:c,password:t.password}).then(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.resetAccount();case 2:case"end":return e.stop()}}),e)})))).catch((function(e){var t=e.response,n=r.$lastElement(r.$splitElement(t.data.message,":"));r.$notify({type:"danger",icon:"tim-icons icon-simple-remove",verticalAlign:"bottom",horizontalAlign:"center",message:n})}));case 5:case"end":return o.stop()}}),o)})))()}}},d=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("notifications"),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-8 ml-auto mr-auto"},[t("reset-account-form",{class:[{"show d-block":!e.hasSucceeded},{"d-none":e.hasSucceeded}],on:{"on-submit":e.verifyPassword}}),e._v(" "),t("card",{class:[{"show d-block":e.hasSucceeded},{"d-none":!e.hasSucceeded}],attrs:{type:"testimonial","header-classes":"card-header-avatar"}},[t("p",{staticClass:"card-description"},[e._v("\n                    "+e._s(e.$t("user.reset-account.success.description"))+"\n                ")]),e._v(" "),t("template",{slot:"footer"},[t("nuxt-link",{staticClass:"btn btn-primary",attrs:{to:"/"}},[e._v("\n                        "+e._s(e.$t("user.reset-account.success.button"))+"\n                    ")])],1)],2)],1)])],1)}),[],!1,null,null,null);t.default=d.exports}}]);