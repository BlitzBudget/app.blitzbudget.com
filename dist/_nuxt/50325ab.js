(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{624:function(t,e,n){"use strict";n.r(e);var r=n(4),l=(n(8),n(37),n(18),{data:function(){return{user:{email:"",name:"Mike"}}},methods:{getError:function(t){return this.errors.first(t)},validate:function(){var t=this;return this.$validator.validateAll().then((function(e){return t.$emit("on-submit",e,t.user),e}))},populateUserAttributes:function(){var t=this.$authentication.fetchCurrentUser(this);this.user.email=t.email,this.user.name=t.name}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.populateUserAttributes();case 2:case"end":return e.stop()}}),e)})))()}}),o=n(2),component=Object(o.a)(l,(function(){var t=this,e=t._self._c;return e("card",[e("h5",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[t._v("Edit Profile")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"},[e("base-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:5",expression:"'required|min:5'"}],attrs:{type:"text",label:"Username",placeholder:"Username",name:"name",error:t.getError("name")},model:{value:t.user.name,callback:function(e){t.$set(t.user,"name",e)},expression:"user.name"}})],1),t._v(" "),e("div",{staticClass:"col-md-4"},[e("base-input",{attrs:{type:"email",label:"Email address",placeholder:"mike@email.com",disabled:""},model:{value:t.user.email,callback:function(e){t.$set(t.user,"email",e)},expression:"user.email"}})],1)]),t._v(" "),e("base-button",{staticClass:"btn-fill",attrs:{"native-type":"submit",type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.validate.apply(null,arguments)}}},[t._v("\n    Save\n  ")])],1)}),[],!1,null,null,null),c=component.exports,m={data:function(){return{user:{email:"",name:"Mike"}}},methods:{populateUserAttributes:function(){var t=this.$authentication.fetchCurrentUser(this);this.user.email=t.email,this.user.name=t.name}},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.populateUserAttributes();case 2:case"end":return e.stop()}}),e)})))()}},v=Object(o.a)(m,(function(){var t=this,e=t._self._c;return e("card",{staticClass:"card-user"},[e("p",{staticClass:"card-text"}),t._v(" "),e("div",{staticClass:"author"},[e("div",{staticClass:"block block-one"}),t._v(" "),e("div",{staticClass:"block block-two"}),t._v(" "),e("div",{staticClass:"block block-three"}),t._v(" "),e("div",{staticClass:"block block-four"}),t._v(" "),e("a",{attrs:{href:"javascript:void(0)"}},[e("img",{staticClass:"avatar",attrs:{src:"img/emilyz.jpg",alt:"..."}}),t._v(" "),e("h5",{staticClass:"title"},[t._v(t._s(t.user.name))])]),t._v(" "),e("p",{staticClass:"description"},[t._v(t._s(t.user.email))])]),t._v(" "),e("p"),t._v(" "),e("div",{staticClass:"card-description"}),t._v(" "),e("div",{staticClass:"button-container",attrs:{slot:"footer"},slot:"footer"})])}),[],!1,null,null,null).exports,d={data:function(){return{user:{company:"Creative Code Inc.",username:"michael23",email:"",firstName:"Mike",lastName:"Andrew",address:"Bld Mihail Kogalniceanu, nr. 8 Bl 1, Sc 1, Ap 09",city:"New York",country:"USA",postalCode:"",aboutMe:"Lamborghini Mercy, Your chick she so thirsty, I'm in that two seat Lambo."}}},methods:{updateProfile:function(){alert("Your data: "+JSON.stringify(this.user))}}},h=Object(o.a)(d,(function(){var t=this,e=t._self._c;return e("card",[e("h5",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[t._v("Danger Zone")]),t._v(" "),e("div",{staticClass:"row mb-3 px-5"},[e("div",{staticClass:"col-6"},[e("h4",{staticClass:"mb-0"},[t._v("Change Password")]),t._v(" "),e("p",{staticClass:"small"},[t._v("You can change your password to enhance security.")])]),t._v(" "),e("div",{staticClass:"col-6"},[e("nuxt-link",{staticClass:"btn btn-primary float-right",attrs:{to:"/user/change-password"}},[t._v("Change Password")])],1)]),t._v(" "),e("div",{staticClass:"row mb-3 px-5"},[e("div",{staticClass:"col-6"},[e("h4",{staticClass:"mb-0"},[t._v("Reset Account")]),t._v(" "),e("p",{staticClass:"small"},[t._v("This will delete all the data but preseve the user account.")])]),t._v(" "),e("div",{staticClass:"col-6"},[e("nuxt-link",{staticClass:"btn btn-link float-right",attrs:{to:"/user/reset-account"}},[t._v("Reset Account")])],1)]),t._v(" "),e("div",{staticClass:"row mb-3 px-5"},[e("div",{staticClass:"col-6"},[e("h4",{staticClass:"mb-0"},[t._v("Delete Account")]),t._v(" "),e("p",{staticClass:"small"},[t._v("This will delete all the data and the user account.")])]),t._v(" "),e("div",{staticClass:"col-6"},[e("nuxt-link",{staticClass:"btn btn-link float-right",attrs:{to:"/user/delete-account"}},[t._v("Delete Account")])],1)])])}),[],!1,null,null,null).exports,f={methods:{validate:function(){var t=this,e=this.$authentication.fetchAccessToken();return this.$validator.validateAll().then((function(n){return t.$emit("on-submit",n,e),n}))}}},_=Object(o.a)(f,(function(){var t=this,e=t._self._c;return e("card",[e("h5",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("user.global-signout.header")))]),t._v(" "),e("div",{staticClass:"row mb-3 px-5"},[e("div",{staticClass:"col-6"},[e("h4",{staticClass:"mb-0"},[t._v(t._s(t.$t("user.global-signout.title")))]),t._v(" "),e("p",{staticClass:"small"},[t._v(t._s(t.$t("user.global-signout.description")))])]),t._v(" "),e("div",{staticClass:"col-6"},[e("base-button",{staticClass:"float-right",attrs:{"native-type":"submit",type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.validate.apply(null,arguments)}}},[t._v(t._s(t.$t("user.global-signout.button")))])],1)])])}),[],!1,null,null,null),C={name:"user",components:{EditProfileForm:c,UserCard:v,ModifyUser:h,GlobalSignout:_.exports},methods:{globallySignOut:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,n.$axios.$post("/profile/global-signout",{access_token:e}).then((function(){n.$notify({type:"success",icon:"tim-icons icon-simple-remove",verticalAlign:"bottom",horizontalAlign:"center",message:n.$t("user.global-signout.success")})})).catch((function(t){var e=t.response,r=n.$lastElement(n.$splitElement(e.data.message,":"));n.$notify({type:"danger",icon:"tim-icons icon-simple-remove",verticalAlign:"bottom",horizontalAlign:"center",message:r})}));case 4:case"end":return r.stop()}}),r)})))()},updateName:function(t,e){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var l,o,c,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return l=n.extractNames(e.name),o=l.firstName,c=l.lastName,m=n.$authentication.fetchAccessToken(),r.next=6,n.$axios.$post("/profile/user-attribute",{access_token:m,user_attributes:{first_name:o,last_name:c}}).then((function(){n.$authentication.setUsername(e.name),n.$notify({type:"success",icon:"tim-icons icon-check-2",verticalAlign:"bottom",horizontalAlign:"center",message:$nuxt.$t("user.profile.update.success")})})).catch((function(t){var e=t.response,r=n.$lastElement(n.$splitElement(e.data.message,":"));n.$notify({type:"danger",icon:"tim-icons icon-simple-remove",verticalAlign:"bottom",horizontalAlign:"center",message:r})}));case 6:case"end":return r.stop()}}),r)})))()},extractNames:function(t){var e=t.split(" ");return{firstName:e.shift(),lastName:e.join(" ")}}}},k=Object(o.a)(C,(function(){var t=this,e=t._self._c;return e("div",[e("notifications"),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-8"},[e("edit-profile-form",{on:{"on-submit":t.updateName}}),t._v(" "),e("global-signout",{on:{"on-submit":t.globallySignOut}}),t._v(" "),e("modify-user")],1),t._v(" "),e("div",{staticClass:"col-md-4"},[e("user-card")],1)])],1)}),[],!1,null,null,null);e.default=k.exports}}]);